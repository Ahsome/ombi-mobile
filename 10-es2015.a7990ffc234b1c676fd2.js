(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{viRw:function(e,t,n){"use strict";n.r(t),n.d(t,"PagesRoutingModule",(function(){return Y}));var s=n("tyNb"),i=n("F8fz"),r=n("AUE5"),o=function(e){return e.OFF="off",e.ON="on",e.CURRENT_PASSWORD="current-password",e.EMAIL="email",e.USERNAME="username",e}({}),a=function(e){return e.TEXT="text",e.EMAIL="email",e.PASSWORD="password",e.URL="url",e}({}),c=n("fXoL"),l=n("3Ewt"),h=n("LLt/"),u=n("fPRZ"),p=n("TEn/");let b=(()=>{class e{constructor(){this.title=""}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Bb({type:e,selectors:[["app-header"]],inputs:{title:"title"},decls:2,vars:1,template:function(e,t){1&e&&(c.Kb(0,"h1"),c.fc(1),c.Jb()),2&e&&(c.xb(1),c.gc(t.title))},styles:["h1[_ngcontent-%COMP%]{margin:75px 0 0 20px;font-size:3em}"]}),e})(),d=(()=>{class e{constructor(){this.label="",this.autocomplete=o.OFF,this.type=a.TEXT,this.required=!1,this.disabled=!1,this.placeholder="",this.value="",this.valueChange=new c.n}ngOnInit(){}updateValue(e){this.value=e,this.valueChange.emit(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Bb({type:e,selectors:[["app-input"]],inputs:{label:"label",autocomplete:"autocomplete",type:"type",required:"required",disabled:"disabled",placeholder:"placeholder",value:"value"},outputs:{valueChange:"valueChange"},decls:4,vars:7,consts:[["position","stacked"],[3,"autocomplete","type","required","disabled","placeholder","value","ionChange"]],template:function(e,t){1&e&&(c.Kb(0,"ion-item"),c.Kb(1,"ion-label",0),c.fc(2),c.Jb(),c.Kb(3,"ion-input",1),c.Sb("ionChange",(function(e){return t.updateValue(e.detail.value)})),c.Jb(),c.Jb()),2&e&&(c.xb(2),c.gc(t.label),c.xb(1),c.Yb("autocomplete",t.autocomplete),c.Yb("type",t.type),c.Yb("required",t.required),c.Yb("disabled",t.disabled),c.Yb("placeholder",t.placeholder),c.Xb("value",t.value))},directives:[p.k,p.l,p.j,p.A],styles:[""]}),e})(),g=(()=>{class e{constructor(){this.label="",this.size="default",this.disabled=!1,this.color="primary",this.fill="solid",this.action=new c.n}ngOnInit(){}handleClick(e){null==e||e.stopPropagation(),this.action.emit()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Bb({type:e,selectors:[["app-button"]],inputs:{label:"label",size:"size",disabled:"disabled",color:"color",fill:"fill"},outputs:{action:"action"},decls:2,vars:5,consts:[["expand","block",3,"size","disabled","color","fill","click"]],template:function(e,t){1&e&&(c.Kb(0,"ion-button",0),c.Sb("click",(function(e){return t.handleClick(e)})),c.fc(1),c.Jb()),2&e&&(c.Xb("size",t.size)("disabled",t.disabled)("color",t.color)("fill",t.fill),c.xb(1),c.hc(" ",t.label,"\n"))},directives:[p.d],styles:["ion-button[_ngcontent-%COMP%]{text-transform:capitalize}"]}),e})(),v=(()=>{class e{constructor(e,t,n){this.credentials=e,this.auth=t,this.toast=n,this.model={ombiUrl:"",username:"",password:""}}ngOnInit(){this.model.ombiUrl=this.credentials.baseUrl,this.model.username=this.credentials.username,this.model.password=this.credentials.password}submit(){this.credentials.baseUrl=this.model.ombiUrl,this.credentials.username=this.model.username,this.credentials.password=this.model.password,this.auth.fetchToken().then(e=>this.toast.show(r.a.SUCCESS,`Successfully signed in as ${this.credentials.name}!`))}get inputType(){return a}}return e.\u0275fac=function(t){return new(t||e)(c.Hb(l.a),c.Hb(h.a),c.Hb(u.a))},e.\u0275cmp=c.Bb({type:e,selectors:[["app-config"]],decls:8,vars:5,consts:[["title","Config"],["scrollY","false"],[1,"form"],["label","URL","placeholder","Ombi Server URL",3,"type","value","valueChange"],["label","Username","placeholder","Username",3,"value","valueChange"],["label","Password","placeholder","Password",3,"type","value","valueChange"],["label","Submit",3,"action"]],template:function(e,t){1&e&&(c.Kb(0,"ion-header"),c.Ib(1,"app-header",0),c.Jb(),c.Kb(2,"ion-content",1),c.Kb(3,"div",2),c.Kb(4,"app-input",3),c.Sb("valueChange",(function(e){return t.model.ombiUrl=e})),c.Jb(),c.Kb(5,"app-input",4),c.Sb("valueChange",(function(e){return t.model.username=e})),c.Jb(),c.Kb(6,"app-input",5),c.Sb("valueChange",(function(e){return t.model.password=e})),c.Jb(),c.Kb(7,"app-button",6),c.Sb("action",(function(){return t.submit()})),c.Jb(),c.Jb(),c.Jb()),2&e&&(c.xb(4),c.Xb("type",t.inputType.URL)("value",t.model.ombiUrl),c.xb(1),c.Xb("value",t.model.username),c.xb(1),c.Xb("type",t.inputType.PASSWORD)("value",t.model.password))},directives:[p.h,b,p.g,d,g],styles:[".form[_ngcontent-%COMP%]{margin-top:40px}.form[_ngcontent-%COMP%]   app-button[_ngcontent-%COMP%]{position:relative;top:20px;padding:0 18px;width:100%;display:inline-block}"]}),e})();class f{constructor(e){this.movie=e,this.type=i.f.MOVIE,this.buttons=[]}get id(){return this.movie.id}get title(){return this.movie.title}get description(){return this.movie.description}get posterUrl(){return this.movie.posterUrl}get tags(){let e=[];return void 0!==this.requested&&e.push({color:this.available||this.approved?"success":this.requested?"warning":"danger",text:this.available?"Available":this.approved?"Approved":this.requested?"Requested":"Not Requested"}),e.push({color:"primary",text:new Date(this.movie.releaseDate).toLocaleDateString()}),e}get available(){return this.movie.available}get requested(){var e;return null===(e=this.movie.request)||void 0===e?void 0:e.requested}get approved(){var e;return null===(e=this.movie.request)||void 0===e?void 0:e.approved}disable(){this.movie.request.requested=!0}set requested(e){this.movie.request.requested=e}}class m{constructor(e){this.tvShow=e,this.type=i.f.TV,this.buttons=[]}get id(){return this.tvShow.id}get title(){return this.tvShow.title}get posterUrl(){return this.tvShow.posterUrl}get description(){return this.tvShow.description}get tags(){return[{color:this.available||this.approved?"success":this.requested||this.partlyAvailable?"warning":"danger",text:this.available?"Available":this.approved?"Approved":this.requested?"Requested":this.partlyAvailable?"Partly Available":"Not Requested"},{color:"primary",text:new Date(this.tvShow.aired).toLocaleDateString()},{color:"tertiary",text:this.tvShow.network}]}get available(){return this.tvShow.available}get partlyAvailable(){return this.tvShow.partlyAvailable}get requested(){return this.tvShow.request.requested}get approved(){return this.tvShow.request.approved}set requested(e){this.tvShow.request.requested=e}disable(){this.tvShow.request.requested=!0}}const w=(e,t,n)=>t==i.f.TV?e.childRequests[0][n]:e[n],q=e=>Array.prototype.concat(...e).sort((e,t)=>t.request.date-e.request.date);var y=n("hD8V");let O=(()=>{class e{constructor(e,t){this.api=e,this.toast=t}list(e=i.f.MOVIE,t=10,n=0,s=i.d.REQUEST_DATE_DESC,r=i.e.NO_FILTER,o=i.c.NO_FILTER){return this.api.get(`/Request/${e}/${t}/${n}/${s}/${r}/${o}`,{},{}).then(t=>this.format(t.collection,e))}search(e=i.f.MOVIE,t){return this.api.get(`/Request/${e}/search/${t}`,{},{}).then(t=>this.format(t.collection,e))}request(e,t){return this.api.post("/Request/"+e,{},this.requestBody(e,t)).then(e=>this.toast.show(e.isError?r.a.ERROR:r.a.SUCCESS,e[e.isError?"errorMessage":"message"]))}performAction(e,t,n=0){return this.api[e==i.a.APPROVE?"post":"put"](`/Request/${t}/${e}`,{},{id:n}).then(()=>this.toast.show(r.a.SUCCESS,`Successfully ${e==i.a.APPROVE?"approved":"denied"} request`))}format(e,t){return e.map(e=>({id:(null==e?void 0:e.theMovieDbId)||(null==e?void 0:e.imdbId),title:e.title,description:e.overview,posterUrl:e.posterPath,request:{id:e.id,requested:!0,approved:w(e,t,"approved"),denied:w(e,t,"denied"),date:new Date(w(e,t,"requestedDate")),user:{alias:w(e,t,"requestedUser").alias,email:w(e,t,"requestedUser").email,name:w(e,t,"requestedUser").userName}},available:e.childRequests?-1==e.childRequests.map(e=>e.available).indexOf([!0]):e.available,type:t}))}requestBody(e,t){return e==i.f.MOVIE?{theMovieDbId:t,languageCode:"en"}:{firstSeason:!1,latestSeason:!1,requestAll:!0,tvDbId:t}}}return e.\u0275fac=function(t){return new(t||e)(c.Ob(y.a),c.Ob(u.a))},e.\u0275prov=c.Db({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var C=function(e){return e.POPULAR="popular",e.UPCOMING="upcoming",e.TOP_RATED="toprated",e.NOW_PLAYING="nowplaying",e}({});let S=(()=>{class e{constructor(e){this.api=e,this.movieCache={}}list(e=C.POPULAR){return this.api.get("/search/Movie/"+e,{},{}).then(this.format).then(e=>this.cacheResults(e))}search(e){return this.api.post("/search/Movie/",{},{searchTerm:e,languageCode:"en"}).then(this.format).then(e=>this.cacheResults(e))}get movies(){return this.movieCache}cache(e){this.movieCache[e.id]=e}cacheResults(e){return e.forEach(e=>this.movieCache[e.id]=e),e}format(e){return e.map(e=>({id:e.id,title:e.title,description:e.overview,posterUrl:"https://image.tmdb.org/t/p/w300"+e.posterPath,request:{id:e.requestId,requested:e.requested,approved:e.approved,denied:e.denied},releaseDate:e.releaseDate,available:e.available}))}}return e.\u0275fac=function(t){return new(t||e)(c.Ob(y.a))},e.\u0275prov=c.Db({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var P=n("mrSG"),M=function(e){return e.POPULAR="popular",e.TRENDING="trending",e.MOST_WATCHED="mostwatched",e.ANTICIPATED="anticipated",e}({});let x=(()=>{class e{constructor(e){this.api=e,this.showCache={}}list(e=M.POPULAR){return this.api.get("/search/Tv/"+e,{},{}).then(this.format).then(e=>Promise.all(e.map(e=>Object(P.a)(this,void 0,void 0,(function*(){var t;return e.posterUrl=null===(t=yield this.getInfo(e.id))||void 0===t?void 0:t.banner,e}))))).then(e=>this.cacheResults(e))}search(e){return this.api.get("/search/Tv/"+e,{},{}).then(this.format).then(e=>Promise.all(e.map(e=>Object(P.a)(this,void 0,void 0,(function*(){var t;return e.posterUrl=null===(t=yield this.getInfo(e.id))||void 0===t?void 0:t.banner,e}))))).then(e=>this.cacheResults(e))}getImage(e){return this.api.get("/Images/tv/"+e,{},{})}cache(e){this.showCache[e.id]=e}getInfo(e){return this.api.get("/search/Tv/info/"+e,{},{})}get shows(){return this.showCache}cacheResults(e){return e.forEach(e=>this.showCache[e.id]=e),e}format(e){return e.map(e=>({id:e.id,title:e.title,description:e.overview,request:{id:e.requestId,requested:e.requested,approved:e.approved,denied:e.denied,type:{all:e.requestAll,firstSeason:e.firstSeason,latestSeason:e.latestSeason},seasons:e.seasonRequests},network:e.network,status:e.status,aired:e.firstAired,available:e.available,partlyAvailable:e.partlyAvailable}))}}return e.\u0275fac=function(t){return new(t||e)(c.Ob(y.a))},e.\u0275prov=c.Db({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),I=(()=>{class e{constructor(e,t,n,s,i){this.requests=e,this.route=t,this.router=n,this.movieService=s,this.tvService=i,this.back=new c.n}ngOnInit(){this.subscription=this.route.paramMap.subscribe(e=>{var t,n,s,r;let o=e.get("type"),a=e.get("id");switch(o){case i.b.TV:(null===(t=this.tvService)||void 0===t?void 0:t.shows[a])?this.content=new m(null===(n=this.tvService)||void 0===n?void 0:n.shows[a]):this.router.navigate(["/"]);break;case i.b.MOVIE:(null===(s=this.movieService)||void 0===s?void 0:s.movies[a])?this.content=new f(null===(r=this.movieService)||void 0===r?void 0:r.movies[a]):this.router.navigate(["/"])}})}ngOnDestroy(){this.subscription.unsubscribe()}get type(){return this.content.type}get label(){return this.content.available?"Available":this.content.requested?"Requested":"Request "+(this.type==i.f.TV?this.type.toUpperCase():this.type)}get color(){return this.content.available?"success":this.content.requested?"warning":"success"}goBack(){this.back.emit()}request(){this.requests.request(this.content.type,this.content.id).then(()=>this.content.requested=!0)}}return e.\u0275fac=function(t){return new(t||e)(c.Hb(O),c.Hb(s.a),c.Hb(s.g),c.Hb(S),c.Hb(x))},e.\u0275cmp=c.Bb({type:e,selectors:[["app-content"]],outputs:{back:"back"},decls:13,vars:6,consts:[["translucent","true"],["slot","start"],["default-href","movies",3,"click"],[1,"content"],["fill","outline",3,"disabled","label","color","action"],[3,"src"]],template:function(e,t){1&e&&(c.Kb(0,"ion-header",0),c.Kb(1,"ion-toolbar"),c.Kb(2,"ion-buttons",1),c.Kb(3,"ion-back-button",2),c.Sb("click",(function(){return t.goBack()})),c.Jb(),c.Jb(),c.Kb(4,"ion-title"),c.fc(5),c.Jb(),c.Jb(),c.Jb(),c.Kb(6,"ion-content"),c.Kb(7,"div",3),c.Kb(8,"app-button",4),c.Sb("action",(function(){return t.request()})),c.Jb(),c.Ib(9,"img",5),c.Ib(10,"br"),c.Kb(11,"p"),c.fc(12),c.Jb(),c.Jb(),c.Jb()),2&e&&(c.xb(5),c.gc(null==t.content?null:t.content.title),c.xb(3),c.Xb("disabled",t.content.requested||t.content.available)("label",t.label)("color",t.color),c.xb(1),c.Yb("src",t.content.posterUrl,c.cc),c.xb(3),c.gc(t.content.description))},directives:[p.h,p.w,p.e,p.b,p.c,p.v,p.g,g],styles:["[_nghost-%COMP%]   img[_ngcontent-%COMP%]{width:45%}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{margin:10px;font-size:1.2em}[_nghost-%COMP%]   app-button[_ngcontent-%COMP%]{float:right;width:52%;margin-top:190px}"]}),e})(),R=(()=>{class e{constructor(){this.placeholder="",this.change=new c.n}ngOnInit(){}updateValue(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.change.emit(e)},500)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Bb({type:e,selectors:[["app-search"]],inputs:{placeholder:"placeholder"},outputs:{change:"change"},decls:1,vars:1,consts:[[3,"placeholder","ionChange"]],template:function(e,t){1&e&&(c.Kb(0,"ion-searchbar",0),c.Sb("ionChange",(function(e){return t.updateValue(e.detail.value)})),c.Jb()),2&e&&c.Xb("placeholder",t.placeholder)},directives:[p.r,p.A],styles:[""]}),e})();var T=n("ofXK");function A(e,t){if(1&e){const e=c.Lb();c.Kb(0,"app-button",12),c.Sb("action",(function(){c.bc(e);const n=t.$implicit;return c.Ub(2).performAction(n.action)})),c.Jb()}if(2&e){const e=t.$implicit;c.Xb("label",e.label)("color",e.color)("disabled",e.disabled)}}function _(e,t){if(1&e&&(c.Kb(0,"div",10),c.ec(1,A,1,3,"app-button",11),c.Jb()),2&e){const e=c.Ub();c.xb(1),c.Xb("ngForOf",e.content.buttons)}}function J(e,t){if(1&e&&(c.Kb(0,"ion-chip"),c.Kb(1,"ion-label",13),c.fc(2),c.Jb(),c.Jb()),2&e){const e=t.$implicit;c.xb(1),c.Xb("color",e.color),c.xb(1),c.gc(e.text)}}const K=[[["buttons-slot"]]],U=function(e){return{hasButtons:e}},E=["buttons-slot"];let k=(()=>{class e{constructor(){this.click=new c.n}ngOnInit(){}get hasButtons(){var e,t;return(null===(t=null===(e=this.content)||void 0===e?void 0:e.buttons)||void 0===t?void 0:t.length)>0}performAction(e){this.requestsService.performAction(e,this.content.type,this.content.requestId).then(t=>{this.content[e==i.a.APPROVE?"approve":"deny"]()})}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Bb({type:e,selectors:[["app-content-row"]],inputs:{content:"content",requestsService:"requestsService"},outputs:{click:"click"},ngContentSelectors:E,decls:14,vars:8,consts:[[3,"click"],[1,"content-row"],[1,"content-top"],[1,"poster"],[3,"src"],[1,"info"],[3,"ngClass"],["class","buttons",4,"ngIf"],[1,"content-bottom"],[4,"ngFor","ngForOf"],[1,"buttons"],["size","default","fill","outline",3,"label","color","disabled","action",4,"ngFor","ngForOf"],["size","default","fill","outline",3,"label","color","disabled","action"],["disabled","true",3,"color"]],template:function(e,t){1&e&&(c.Wb(K),c.Kb(0,"ion-item",0),c.Sb("click",(function(){return t.click.emit()})),c.Kb(1,"div",1),c.Kb(2,"div",2),c.Kb(3,"div",3),c.Ib(4,"img",4),c.Jb(),c.Kb(5,"div",5),c.Kb(6,"h2"),c.fc(7),c.Jb(),c.Kb(8,"p",6),c.fc(9),c.Jb(),c.Vb(10),c.ec(11,_,2,1,"div",7),c.Jb(),c.Jb(),c.Kb(12,"div",8),c.ec(13,J,3,2,"ion-chip",9),c.Jb(),c.Jb(),c.Jb()),2&e&&(c.xb(4),c.Yb("src",t.content.posterUrl,c.cc),c.xb(3),c.gc(t.content.title),c.xb(1),c.Xb("ngClass",c.Zb(6,U,t.hasButtons)),c.xb(1),c.gc(t.content.description),c.xb(2),c.Xb("ngIf",t.hasButtons),c.xb(2),c.Xb("ngForOf",t.content.tags))},directives:[p.k,T.h,T.j,T.i,g,p.f,p.l],styles:[".content-row[_ngcontent-%COMP%]{display:flex;flex-direction:column}.content-row[_ngcontent-%COMP%]   .content-top[_ngcontent-%COMP%]{display:flex;height:190px}.content-row[_ngcontent-%COMP%]   .content-top[_ngcontent-%COMP%]   .poster[_ngcontent-%COMP%]{flex:0 0 auto;margin:20px 0 15px;padding-right:10px;height:160px}.content-row[_ngcontent-%COMP%]   .content-top[_ngcontent-%COMP%]   .poster[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:100%}.content-row[_ngcontent-%COMP%]   .content-top[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{display:flex;text-align:initial;flex-direction:column}.content-row[_ngcontent-%COMP%]   .content-top[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:5px}.content-row[_ngcontent-%COMP%]   .content-top[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:.5em;word-wrap:break-word;text-overflow:ellipsis;overflow:hidden;flex-grow:1;margin-bottom:8px}.content-row[_ngcontent-%COMP%]   .content-top[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   p.hasButtons[_ngcontent-%COMP%]{max-height:75px}.content-row[_ngcontent-%COMP%]   .content-top[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{display:inline-flex;flex-direction:row;align-content:right}.content-row[_ngcontent-%COMP%]   .content-top[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   app-button[_ngcontent-%COMP%]{flex-grow:1}.content-row[_ngcontent-%COMP%]   .content-bottom[_ngcontent-%COMP%]{display:flex;margin:0 0 8px -3px;width:calc(100% - 12px)}"]}),e})();function V(e,t){1&e&&c.Ib(0,"ion-progress-bar",6)}function D(e,t){if(1&e){const e=c.Lb();c.Kb(0,"app-content-row",7),c.Sb("click",(function(){c.bc(e);const n=t.$implicit;return c.Ub().showContent(n)})),c.Jb()}if(2&e){const e=t.$implicit,n=c.Ub();c.Xb("content",n.content(e))}}let L=(()=>{class e{constructor(e,t){this.movie=e,this.router=t,this.movies=[],this.searchTerm=""}ngOnInit(){this.fetchAllMovies()}ngOnDestroy(){this.movies=[]}searchChange(e){"string"==typeof e&&(this.searchTerm=e,""!=e&&e?this.searchMovies():this.fetchAllMovies())}fetchAllMovies(){return this.movie.list().then(e=>this.movies=e)}searchMovies(){return this.movie.search(this.searchTerm).then(e=>this.movies=e)}content(e){return new f(e)}showContent(e){this.router.navigate([i.b.MOVIE,e.id])}refresh(e){(""==this.searchTerm?this.fetchAllMovies():this.searchMovies()).then(()=>e.target.complete())}}return e.\u0275fac=function(t){return new(t||e)(c.Hb(S),c.Hb(s.g))},e.\u0275cmp=c.Bb({type:e,selectors:[["app-movies"]],decls:9,vars:2,consts:[["title","Movies"],["placeholder","Search Movies",3,"change"],["color","primary","type","indeterminate",4,"ngIf"],["slot","fixed",3,"ionRefresh"],["lines","full"],[3,"content","click",4,"ngFor","ngForOf"],["color","primary","type","indeterminate"],[3,"content","click"]],template:function(e,t){1&e&&(c.Kb(0,"ion-header"),c.Ib(1,"app-header",0),c.Kb(2,"app-search",1),c.Sb("change",(function(e){return t.searchChange(e)})),c.Jb(),c.Jb(),c.Kb(3,"ion-content"),c.ec(4,V,1,0,"ion-progress-bar",2),c.Kb(5,"ion-refresher",3),c.Sb("ionRefresh",(function(e){return t.refresh(e)})),c.Ib(6,"ion-refresher-content"),c.Jb(),c.Kb(7,"ion-list",4),c.ec(8,D,1,1,"app-content-row",5),c.Jb(),c.Jb()),2&e&&(c.xb(4),c.Xb("ngIf",0==t.movies.length),c.xb(4),c.Xb("ngForOf",t.movies))},directives:[p.h,b,R,p.g,T.j,p.o,p.p,p.m,T.i,p.n,k],styles:[""]}),e})();class X{constructor(e){this.request=e}get id(){return this.request.id}get title(){return this.request.title}get description(){return this.request.description}get tags(){return[{color:this.type==i.f.TV?"tertiary":"danger",text:this.type==i.f.TV?this.type.toUpperCase():this.type},{color:"primary",text:this.request.request.user.name}]}get available(){return this.request.available}get approved(){return this.request.request.approved}get denied(){return this.request.request.denied}get posterUrl(){return this.type==i.f.MOVIE?"https://image.tmdb.org/t/p/w300//"+this.request.posterUrl:this.request.posterUrl}get requested(){return!0}get requestId(){return this.request.request.id}get type(){return this.request.type}get buttons(){let e=[];return e=this.approved?[{label:"Approved",color:"success",action:void 0,disabled:!0}]:this.denied?[{label:"Denied",color:"danger",action:void 0,disabled:!0}]:[{label:"Deny",color:"danger",action:i.a.DENY},{label:"Approve",color:"success",action:i.a.APPROVE}],e}deny(){this.request.request.denied=!0}approve(){this.request.request.approved=!0}disable(){}}function F(e,t){1&e&&c.Ib(0,"ion-progress-bar",6)}function $(e,t){if(1&e&&c.Ib(0,"app-content-row",7),2&e){const e=t.$implicit,n=c.Ub();c.Xb("content",n.content(e))("requestsService",n.request)}}let B=(()=>{class e{constructor(e){this.request=e,this.contentList=[],this.selectedRequestType=i.f.MOVIE,this.searchTerm=""}ngOnInit(){this.fetchAllRequests()}ngOnDestroy(){this.contentList=[]}typeChange(e){this.selectedRequestType=e.detail.value,""!=this.searchTerm&&this.searchTerm?this.searchRequests():this.fetchAllRequests()}searchChange(e){this.searchTerm=e,""!=this.searchTerm&&this.searchTerm?this.searchRequests():this.fetchAllRequests()}fetchAllRequests(){return Promise.all([this.request.list(i.f.MOVIE),this.request.list(i.f.TV)]).then(e=>this.contentList=q(e))}searchRequests(){return Promise.all([this.request.search(i.f.MOVIE,this.searchTerm),this.request.search(i.f.TV,this.searchTerm)]).then(e=>this.contentList=q(e))}content(e){return new X(e)}get requestType(){return i.f}refresh(e){(""==this.searchTerm?this.fetchAllRequests():this.searchRequests()).then(()=>e.target.complete())}}return e.\u0275fac=function(t){return new(t||e)(c.Hb(O))},e.\u0275cmp=c.Bb({type:e,selectors:[["app-requests"]],decls:9,vars:2,consts:[["title","Requests"],["placeholder","Search Requests",3,"change"],["color","primary","type","indeterminate",4,"ngIf"],["slot","fixed",3,"ionRefresh"],["lines","full"],[3,"content","requestsService",4,"ngFor","ngForOf"],["color","primary","type","indeterminate"],[3,"content","requestsService"]],template:function(e,t){1&e&&(c.Kb(0,"ion-header"),c.Ib(1,"app-header",0),c.Kb(2,"app-search",1),c.Sb("change",(function(e){return t.searchChange(e)})),c.Jb(),c.Jb(),c.Kb(3,"ion-content"),c.ec(4,F,1,0,"ion-progress-bar",2),c.Kb(5,"ion-refresher",3),c.Sb("ionRefresh",(function(e){return t.refresh(e)})),c.Ib(6,"ion-refresher-content"),c.Jb(),c.Kb(7,"ion-list",4),c.ec(8,$,1,2,"app-content-row",5),c.Jb(),c.Jb()),2&e&&(c.xb(4),c.Xb("ngIf",0==t.contentList.length),c.xb(4),c.Xb("ngForOf",t.contentList))},directives:[p.h,b,R,p.g,T.j,p.o,p.p,p.m,T.i,p.n,k],styles:[""]}),e})();function N(e,t){1&e&&c.Ib(0,"ion-progress-bar",6)}function H(e,t){if(1&e){const e=c.Lb();c.Kb(0,"app-content-row",7),c.Sb("click",(function(){c.bc(e);const n=t.$implicit;return c.Ub().showContent(n)})),c.Jb()}if(2&e){const e=t.$implicit,n=c.Ub();c.Xb("content",n.content(e))}}const z=[{path:i.b.MOVIE,component:L},{path:i.b.TV,component:(()=>{class e{constructor(e,t){this.tv=e,this.router=t,this.shows=[],this.searchTerm=""}ngOnInit(){this.fetchAllShows()}ngOnDestroy(){this.shows=[]}searchChange(e){"string"==typeof e&&(this.searchTerm=e,""!=e&&e?this.searchShows():this.fetchAllShows())}fetchAllShows(){return this.tv.list().then(e=>this.shows=e)}searchShows(){return this.tv.search(this.searchTerm).then(e=>this.shows=e)}content(e){return new m(e)}showContent(e){this.router.navigate([i.b.TV,e.id])}refresh(e){(""==this.searchTerm?this.fetchAllShows():this.searchShows()).then(()=>e.target.complete())}}return e.\u0275fac=function(t){return new(t||e)(c.Hb(x),c.Hb(s.g))},e.\u0275cmp=c.Bb({type:e,selectors:[["app-tv"]],decls:9,vars:2,consts:[["title","TV Shows"],["placeholder","Search TV Shows",3,"change"],["color","primary","type","indeterminate",4,"ngIf"],["slot","fixed",3,"ionRefresh"],["lines","full"],[3,"content","click",4,"ngFor","ngForOf"],["color","primary","type","indeterminate"],[3,"content","click"]],template:function(e,t){1&e&&(c.Kb(0,"ion-header"),c.Ib(1,"app-header",0),c.Kb(2,"app-search",1),c.Sb("change",(function(e){return t.searchChange(e)})),c.Jb(),c.Jb(),c.Kb(3,"ion-content"),c.ec(4,N,1,0,"ion-progress-bar",2),c.Kb(5,"ion-refresher",3),c.Sb("ionRefresh",(function(e){return t.refresh(e)})),c.Ib(6,"ion-refresher-content"),c.Jb(),c.Kb(7,"ion-list",4),c.ec(8,H,1,1,"app-content-row",5),c.Jb(),c.Jb()),2&e&&(c.xb(4),c.Xb("ngIf",0==t.shows.length),c.xb(4),c.Xb("ngForOf",t.shows))},directives:[p.h,b,R,p.g,T.j,p.o,p.p,p.m,T.i,p.n,k],styles:[""]}),e})()},{path:"requests",component:B},{path:"config",component:v},{path:":type/:id",component:I}];let Y=(()=>{class e{}return e.\u0275mod=c.Fb({type:e}),e.\u0275inj=c.Eb({factory:function(t){return new(t||e)},imports:[[s.i.forChild(z)],s.i]}),e})()}}]);